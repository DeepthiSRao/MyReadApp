(this["webpackJsonpmyreads-app"]=this["webpackJsonpmyreads-app"]||[]).push([[0],{24:function(e,t,a){e.exports=a(36)},34:function(e,t,a){},35:function(e,t,a){},36:function(e,t,a){"use strict";a.r(t);var n=a(0),o=a.n(n),r=a(16),c=a.n(r),l=a(6),s=a(17),i=a(18),u=a(23),m=a(21),h=a(1),d=a(9),f="https://reactnd-books-api.udacity.com",k=localStorage.token;k||(k=localStorage.token=Math.random().toString(36).substr(-8));var b={Accept:"application/json",Authorization:k},p=function(e,t){return fetch("".concat(f,"/books/").concat(e.id),{method:"PUT",headers:Object(d.a)(Object(d.a)({},b),{},{"Content-Type":"application/json"}),body:JSON.stringify({shelf:t})}).then((function(e){return e.json()}))},v=function(e){return fetch("".concat(f,"/search"),{method:"POST",headers:Object(d.a)(Object(d.a)({},b),{},{"Content-Type":"application/json"}),body:JSON.stringify({query:e})}).then((function(e){return e.json()})).then((function(e){return e.books}))},E=function(e){return o.a.createElement("div",{className:"book-shelf-changer"},o.a.createElement("select",{value:e.shelf,onChange:function(t){e.selectHandler(e.book,t.target.value)}},o.a.createElement("option",{value:"move",disabled:!0},"Move to..."),o.a.createElement("option",{value:"currentlyReading"},"Currently Reading"),o.a.createElement("option",{value:"wantToRead"},"Want to Read"),o.a.createElement("option",{value:"read"},"Read"),o.a.createElement("option",{value:"none"},"None")))},y=function(e){var t=e.book,a=e.shelf,n=e.selectHandler,r=t.title,c=t.authors,l=t.imageLinks;return o.a.createElement(o.a.Fragment,null,o.a.createElement("li",null,o.a.createElement("div",{className:"book"},o.a.createElement("div",{className:"book-top"},o.a.createElement("div",{className:"book-cover",style:{width:128,height:193,backgroundImage:"url(".concat(l?l.thumbnail:"No book cover availabel",")")}}),o.a.createElement(E,{book:t,shelf:a,selectHandler:n})),o.a.createElement("div",{className:"book-title"},r),o.a.createElement("div",{className:"book-authors"},c?c.join(", "):"Unknown author"))))},g=function(e){var t=e.shelf,a=e.bookList,n=e.selectHandler,r=a.filter((function(e){return e.shelf===t.category}));return o.a.createElement("div",{className:"list-books-content"},o.a.createElement("div",null,o.a.createElement("div",{className:"bookshelf"},o.a.createElement("h2",{className:"bookshelf-title"},t.label),o.a.createElement("div",{className:"bookshelf-books"},o.a.createElement("ol",{className:"books-grid"},r.map((function(e){return o.a.createElement(y,{key:e.id,book:e,selectHandler:n,shelf:t.category})})))))))},S=function(e){var t=e.shelves,a=e.bookList,n=e.selectOptionHandler;return o.a.createElement("div",{className:"list-books"},o.a.createElement("div",{className:"list-books-title"},o.a.createElement("h1",null,"MyReads")),o.a.createElement("div",{className:"list-books-content"},t.map((function(e){return o.a.createElement(g,{key:e.id,shelf:e,bookList:a,selectHandler:n})}))),o.a.createElement("div",{className:"open-search"},o.a.createElement(l.b,{to:"/search"},o.a.createElement("button",null,"Add a book"))))},N=a(22),B=a(20),j=a.n(B),O=function(e){var t=e.onSearch,a=e.onReset,r=Object(n.useState)(""),c=Object(N.a)(r,2),s=c[0],i=c[1],u=o.a.useRef(j.a.debounce((function(e){return t(e)}),200)).current;return o.a.createElement("div",{className:"search-books-bar"},o.a.createElement(l.b,{to:"/"},o.a.createElement("button",{className:"close-search",onClick:a},"Close")),o.a.createElement("div",{className:"search-books-input-wrapper"},o.a.createElement("input",{type:"text",placeholder:"Search by title or author",autoFocus:!0,value:s,onChange:function(e){var t=e.target.value;i(t),u(t)}})))},R=function(e){var t=e.booksList,a=e.selectHandler;return o.a.createElement("div",{className:"search-books-results"},o.a.createElement("ol",{className:"books-grid"},t&&t.map((function(e){return o.a.createElement(y,{key:e.id,book:e,shelf:e.shelf?e.shelf:"none",selectHandler:a})}))))},H=function(e){var t=e.searchBooks,a=e.myBooks,n=e.onSearch,r=e.selectOptionHandler,c=e.onReset,l=t.map((function(e){var t=a.find((function(t){return t.id===e.id}));return e.shelf=t?t.shelf:"none",e}));return o.a.createElement("div",{className:"search-books"},o.a.createElement(O,{onSearch:n,onReset:c}),o.a.createElement(R,{booksList:l,selectHandler:r}))},C=(a(34),[{id:1,category:"currentlyReading",label:"Currently Reading"},{id:2,category:"wantToRead",label:"Want to Read"},{id:3,category:"read",label:"Read"}]),w=function(e){Object(u.a)(a,e);var t=Object(m.a)(a);function a(){var e;Object(s.a)(this,a);for(var n=arguments.length,o=new Array(n),r=0;r<n;r++)o[r]=arguments[r];return(e=t.call.apply(t,[this].concat(o))).state={myBooks:[],searchBooks:[],error:!1},e.handleSelectInput=function(t,a){p(t,a).catch((function(t){console.log("Books update request failed"+t),e.setState({error:!0})})),"none"===a?e.setState((function(e){return{myBooks:e.myBooks.filter((function(e){return e.title!==t.title}))}})):(t.shelf=a,e.setState((function(e){return{myBooks:e.myBooks.filter((function(e){return e.title!==t.title})).concat(t)}})))},e.handleSearchBook=function(t){t?v(t).then((function(t){e.setState({searchBooks:t.error?[]:t})})).catch((function(t){console.log("There is a search error!! "+t),e.setState({error:!0})})):e.resetSearch()},e.resetSearch=function(){e.setState({searchBooks:[]})},e}return Object(i.a)(a,[{key:"componentDidMount",value:function(){var e=this;fetch("".concat(f,"/books"),{headers:b}).then((function(e){return e.json()})).then((function(e){return e.books})).then((function(t){e.setState({myBooks:t})})).catch((function(t){console.log("Books get request failed"+t),e.setState({error:!0})}))}},{key:"render",value:function(){var e=this;return o.a.createElement("div",{className:"app"},this.state.error&&o.a.createElement("p",null,"Please try later!!! Looks there is an issue!!!"),o.a.createElement(h.a,{path:"/",exact:!0,render:function(){return o.a.createElement(S,{bookList:e.state.myBooks,shelves:C,selectOptionHandler:e.handleSelectInput})}}),o.a.createElement(h.a,{path:"/search",exact:!0,render:function(){return o.a.createElement(H,{myBooks:e.state.myBooks,searchBooks:e.state.searchBooks,onSearch:e.handleSearchBook,onReset:e.resetSearch,selectOptionHandler:e.handleSelectInput})}}))}}]),a}(o.a.Component);a(35);c.a.render(o.a.createElement(l.a,null,o.a.createElement(w,null)),document.getElementById("root"))}},[[24,1,2]]]);
//# sourceMappingURL=main.3a8aaa14.chunk.js.map